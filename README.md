# README

## ER図
* https://gyazo.com/bd22cc0a62f196fa7aaa326d7acb093a

## サービス概要
リアルタイム性とソーシャル機能を重視したブログプラットフォームです。
従来のブログサービスに加えて、ユーザー同士のフォロー機能やクローズコミュニケーション機能、リアルタイム更新機能を搭載し、コミュニティ要素を最小限に追加しています。
URLのプレビュー機能やブラウザ通知機能により、よりインタラクティブで使いやすいブログ体験を提供します。
またブログ体験をスマホでもしやすいように、マルチデバイス向けのユーザビリティを提供します。

## このサービスへの思い・作りたい理由
自分は昔からアメーバブログやmixi、GREEなど長文で書かれる一般人によるブログがとても好きでした。個人的な価値観にはなりますが、物品をネットで購入する際に星の数＋短文で表すようなレビューよりも、長文で詳細な使用感などを画像や動画を交えて具体的に述べているものの方が信憑性があるように感じ、購買意欲が上がります。
ですが最近では、X（旧twitter）やinstagramのような短文ブログが若者を中心に流行っています。この背景にはデバイスの変化や利用目的やスタイルの変化など様々な理由が存在すると思います。
しかしテレビとラジオの違いのように、ブログにはブログの良さがあると思っていて、長文ブログの文化を再燃させたいと感じたことと、読書から離れがちな若者に向けて読む側ではなく書く側になる場所も提供したいと感じたためこのサービスを作りたいと思いました。
ブログの良さは、「長文文化」にあると思います。長文でなければいけないというわけではないが、思いの丈や好感度などに応じてやはり筆は乗るもので、熱く語ってしまうように文章も長くなってしまうということがあると思います。自分の好きなものを伝えたい思いや、学んできたことを残したい思いなど、現代人に馴染み深い「承認欲求」の満たし方の新しい形をブログは持っているのではないかと自分は考えています。

## ユーザー層について
若年層〜中年層を対象としています。
理由として、若年層に対しては読む側から書く側への転換を行える場所を提供したいということがあります。中年層に対しては、既存のブログを使用していた年齢層だと思うため、再度ブログという文化に触れていただきたい目的と、コンテンツを消費する側から残す側となって自分の「人生の本棚」のような活用をして欲しいと思ったため。

## サービスの利用イメージ
まずは長文を読むことへの抵抗感を無くすこと。そして自分から書き手に移ることで語彙力の向上やコンテンツへの深い理解、自分の思想の公開を行なって欲しいと思っています。
ただ、主目的はXなどのような交流をメインとはしていないため、最小限の交流をもとに自分からクローズコミュニティの形成を数多く行なっていただければと思います。

## ユーザーの獲得について
いきなり「全世代向け」ではなく、まずは「発信欲が強いがTwitterでは収まらない層」にフォーカスしていきます。
その層に対して、クローズドβで「書く場所に困っている人」を招待していく形を進められればと思っています。

## サービスの差別化ポイント・推しポイント

### 差別化ポイント

- ブログは基本的にリアルタイムに見るものではなく、完成したものを投稿して検索流入によって見つけられるため、1ブログへの注目度が低くなる傾向がある。そこに対して、リアルタイムで更新しつつ読者からの意見をディベートしながらより良いものが作れるようになるような機能の追加。また、ブログを貯めることのできる箱を作り、アーカイブ機能や他SNSも活用した拡散性を持たせることで、注目度を個人でクローズでもオープンでも操作することができるようにする。
- ブログは基本的にPC中心で読み書きされやすい媒体なため、スマホでも活用しやすいようなUI・UXにしていく。

### 推しポイント

#### リアルタイム性の実現
- **Action Cable**を活用したリアルタイム更新機能により、記事の投稿や更新がリアルタイムでタイムラインに反映
- 従来のブログサービスでは実現困難だった「ライブ感」のあるコミュニケーション体験

#### 統合されたコミュニケーション機能
- ブログとSNSの機能を融合：記事投稿、フォロー機能、DM機能を一つのプラットフォームで提供
- **Medium**や**note**にはないプライベートメッセージ機能で、読者と著者の直接的なコミュニケーションを促進

#### インテリジェントなURL展開機能
- 記事内のURLを自動でリッチプレビューに変換、視覚的に魅力的な記事作成をサポート
- **LinkThumbnailer gem**を活用した高速で正確なメタデータ取得

#### パーソナライズされた通知システム
- ブラウザ通知とアプリ内通知を組み合わせ、重要な更新を見逃さない仕組み
- フォローしているユーザーの投稿やDMの受信をリアルタイムで通知

## 機能候補

### MVPリリース時
- ユーザー認証機能（サインアップ・ログイン・ログアウト）
- 記事の基本CRUD機能（作成・読み取り・更新・削除）
- 記事一覧・詳細表示機能
- ユーザープロフィール機能
- 基本的なレスポンシブデザイン
- 画像アップロード機能（Active Storage）
- カテゴリー・タグ機能
- コメント機能
- いいね機能
- DM（ダイレクトメッセージ）機能
- ユーザーフォロー・フォロワー機能

### 本リリースまで
- タイムライン機能（フォローユーザーの投稿表示）
- URLプレビュー機能（LinkThumbnailer gem）
- ブラウザ通知機能（Web Push API）
- リアルタイム更新機能（Action Cable）
- 全文検索機能
- ブックマーク機能
- 記事の下書き・予約投稿機能
- PWA対応（オフライン閲覧）
- 投稿時自動校正機能

## 使用する技術スタック

### バックエンド
- **フレームワーク**: Ruby on Rails 8.0.2.1
- **データベース**: SQLite3（開発環境）→ PostgreSQL（本番環境）
- **認証機能**: Devise gem
- **画像アップロード**: Active Storage + Cloudinary
- **リアルタイム機能**: Action Cable（WebSocket）
- **バックグラウンド処理**: Solid Queue（Rails 8標準）

### フロントエンド
- **CSSフレームワーク**: Tailwind CSS
- **JavaScript**: Importmap + Stimulus
- **リアルタイム更新**: Turbo + Action Cable
- **PWA**: Service Worker + Web App Manifest

### デプロイ・インフラ
- **デプロイ先**: Render（メインプラン） / Heroku（サブプラン）
- **CDN**: Cloudinary（画像配信）
- **キャッシュ**: Solid Cache（Rails 8標準）
- **CI/CD**: GitHub Actions

### 主要なGem
- **devise**: ユーザー認証
- **image_processing**: 画像処理
- **linkthumbnailer**: URLプレビュー機能
- **kaminari**: ページネーション
- **ransack**: 検索機能
- **web-push**: プッシュ通知
- **bootsnap**: アプリケーション起動高速化

### 開発・テスト環境
- **テストフレームワーク**: RSpec + Capybara
- **コード品質**: RuboCop + Brakeman
- **デバッグ**: byebug + better_errors
- **開発サーバー**: Puma（Rails標準）

### 実装予定機能の技術詳細
- **リアルタイム更新**: Action Cable + Redis（Pub/Sub）
- **DM機能**: Action Cable + 暗号化（message_encryptor）
- **通知機能**: Web Push API + Service Worker
- **全文検索**: PostgreSQL Full Text Search
- **PWA化**: Workbox + Rails PWA gem

## デプロイメント手順

### Renderでのデプロイ

1. **GitHubリポジトリの準備**
   ```bash
   git add .
   git commit -m "Setup deployment configuration"
   git push origin main
   ```

2. **Renderでの設定**
   - Renderダッシュボードで新しいWebサービスを作成
   - GitHubリポジトリを接続
   - 以下の設定を行う：
     - **Build Command**: `./bin/render-build.sh`
     - **Start Command**: `bundle exec puma -C config/puma.rb`
     - **Environment**: `production`

3. **環境変数の設定**
   以下の環境変数をRenderダッシュボードで設定してください：
   ```
   RAILS_ENV=production
   SECRET_KEY_BASE=your_secret_key_here
   DATABASE_URL=postgresql_url_from_render
   RAILS_SERVE_STATIC_FILES=true
   RAILS_LOG_TO_STDOUT=true
   ```

4. **データベースの設定**
   - RenderでPostgreSQLデータベースを作成
   - DATABASE_URLを環境変数に設定

### ローカルでの開発環境セットアップ

1. **リポジトリのクローン**
   ```bash
   git clone <repository-url>
   cd blog-app
   ```

2. **依存関係のインストール**
   ```bash
   bundle install
   ```

3. **データベースの設定**
   ```bash
   rails db:create
   rails db:migrate
   rails db:seed
   ```

4. **サーバーの起動**
   ```bash
   rails server
   ```

### テスト環境

```bash
# テストの実行
rails test

# RuboCopによるコード品質チェック
bundle exec rubocop

# Brakemanによるセキュリティチェック
bundle exec brakeman
```
